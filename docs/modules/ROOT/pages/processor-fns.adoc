= Processor Functions

Processor functions can be composed to a pipeline. Each function in a pipeline has to have a unique name. +
If an error occurs during function execution or a validation fails, the unchanged input from the pipeline will be sent to the error topic. The message sent to the error topic will take two headers:

- x-exception-message: The message text of the exception
- x-exception-fqcn: The full qualified classname of the exception

== hasValueValidator
image:hasValueValidator.png[]

If the Json element at the given path does not have a value, an error is emitted. +
Having a value means:

- the element exists
- the element value is not null
- for a textual single value: the string is not empty
- for a multivalue: the array contains at least one textual element which is not empty

=== Parameters

|===
|Parameter Name |Type |Required | Description

|name
|String
|Yes
|The name of the function instance

|elementPath
|https://www.rfc-editor.org/rfc/rfc6901[Json Pointer]
|Yes
|The Pointer to the element to be checked
|===

=== Example
==== Configuration
image:hasValueValidator.png[]

==== Valid Input (single value)
[source, json]
----
{
  "id": "ID_1"
}
----

==== Valid Input (multivalue)
[source, json]
----
{
  "id": [null, "ID_X"]
}
----

==== Invalid Input (element does not exist)
[source, json]
----
{
  "name": "Without id"
}
----

==== Invalid Input (null value)
[source, json]
----
{
  "id": null
}
----

==== Invalid Input (empty string)
[source, json]
----
{
  "id": ""
}
----

==== Invalid Input (multivalue with no non empty string)
[source, json]
----
{
  "id": [null, ""]
}
----

== trimNormalizer
image:trimNormalizer.png[]

== padNormalizer
image:padNormalizer.png[]

If the Json element at the given path is textual or an array containing textual elements, the `padNormalizer` function will add the determined character to the content to achieve a specific length and return the normalized Json.

=== Parameters

[cols="1,1,1,a", options="autowidth"]
|===
|Parameter Name |Type |Required | Description

|name
|String
|Yes
|The name of the function instance

|elementPath
|https://www.rfc-editor.org/rfc/rfc6901[Json Pointer]
|Yes
|The Pointer to the element to be trimmed

|length
|Integer
|Yes
|The minimum length of textual elements

* The value of `length` should be greater than or equal to `1`
* If the length of textual elements is less than the given `length`, then the `padNormalizer` function will add the filler character to the textual elements to achieve the given `length`.

|fillerCharacter
|Character
|Yes
|The `padNormalizer` function uses this given character to increase the length of the textual elements.

|pad
|Enum
|Yes
|Determining the side of adding the filler character. The validated content for pad is: `LEFT`, `RIGHT`.

* `LEFT`: add the filler character only on the left side
* `RIGHT`: add the filler character only on the right side

|===

=== Example
==== Configuration
image:padNormalizer.png[]
----
Function configuration:
    pad: LEFT
    elementPath: /ean
    lenght: 8
    fillerCharacter: 0
----

===== Sample input (Single textual content)
[source, json]
----
{
  "ean": "12345"
}
----

===== Sample output of `padNormalizer` function
[source, json]
----
{
  "ean": "00012345"
}
----

===== Sample input (Multiple textual content)
[source, json]
----
{
  "ean": ["12345", "123456789"]
}
----

===== Sample output of `padNormalizer` function
[source, json]
----
{
  "ean": ["00012345", "123456789"]
}
----

==== Configuration
image:padNormalizer-RIGHT.png[]
----
Function configuration:
    pad: RIGHT
    elementPath: /ean
    lenght: 8
    fillerCharacter: 0
----

===== Sample input (Single textual content)
[source, json]
----
{
  "ean": "12345"
}
----

===== Sample output of `padNormalizer` function
[source, json]
----
{
  "ean": "12345000"
}
----

===== Sample input (Multiple textual content)
[source, json]
----
{
  "ean": ["12345", "123456789"]
}
----

===== Sample output of `padNormalizer` function
[source, json]
----
{
  "ean": ["12345000", "123456789"]
}
----

== Match
image:Match.png[]

image:fromInput.png[]

image:literal.png[]

== Reduce2One
image:reduce2One.png[]

== MergeCreate
image:MergeCreate.png[]

image:mapping.png[]

== ChangeEventEmit
image:ChangeEventEmit.png[]

== Multiple Functions
image:multipleFns.png[]

