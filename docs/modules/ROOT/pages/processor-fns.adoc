= Processor Functions

Processor functions can be composed to a pipeline. Each function in a pipeline has to have a unique name. +
If an error occurs during function execution or a validation fails, the unchanged input from the pipeline will be sent to the error topic. The message sent to the error topic will take two headers:

- x-exception-message: The message text of the exception
- x-exception-fqcn: The full qualified classname of the exception

== hasValueValidator
image:hasValueValidator.png[]

If the Json element at the given path does not have a value, an error is emitted. +
Having a value means:

- the element exists
- the element value is not null
- for a textual single value: the string is not empty
- for a multivalue: the array contains at least one textual element which is not empty

=== Parameters

[options="autowidth"]
|===
|Parameter Name |Type |Required | Description

|name
|String
|Yes
|The name of the function instance

|elementPath
|https://www.rfc-editor.org/rfc/rfc6901[Json Pointer]
|Yes
|The Pointer to the element to be checked
|===

=== Example
==== Configuration
image:hasValueValidator.png[]

==== Valid Input (single value)
[source, json]
----
{
  "id": "ID_1"
}
----

==== Valid Input (multivalue)
[source, json]
----
{
  "id": [null, "ID_X"]
}
----

==== Invalid Input (element does not exist)
[source, json]
----
{
  "name": "Without id"
}
----

==== Invalid Input (null value)
[source, json]
----
{
  "id": null
}
----

==== Invalid Input (empty string)
[source, json]
----
{
  "id": ""
}
----

==== Invalid Input (multivalue with no nonempty string)
[source, json]
----
{
  "id": [null, ""]
}
----

== trimNormalizer
image:trimNormalizer.png[]

If the Json element at the given path is textual or an array containing textual elements, the `trimNormalizer` function will trim the textual content and return the trimmed Json content.

=== Parameters

[cols="1,1,1,a", options="autowidth"]
|===
|Parameter Name |Type |Required | Description

|name
|String
|Yes
|The name of the function instance

|elementPath
|https://www.rfc-editor.org/rfc/rfc6901[Json Pointer]
|Yes
|The Pointer to the element to be trimmed

|mode
|Enum
|Yes
| Determining the trim action. The validated content for mode is: `RIGHT`, `LEFT`, and `BOTH`.

* `RIGHT`: trims only the right side
* `LEFT`: trims only the left side
* `BOTH`: trims both sides


|===

=== Example
==== Configuration
image:trimNormalizer.png[]
----
Function configuration:
    mode: LEFT
    elementPath: /ean
----

===== Sample input (Single textual content)
[source, json]
----
{
  "ean": "  12345  "
}
----

===== Sample output of `trimNormalizer` function
[source, json]
----
{
  "ean": "12345  "
}
----

===== Sample input (Multiple textual content)
[source, json]
----
{
  "ean": ["  12345  ", "56789"]
}
----

===== Sample output of `trimNormalizer` function
[source, json]
----
{
  "ean": ["12345  ", "56789"]
}
----


==== Configuration
image:trimNormalizer-RIGHT.png[]
----
Function configuration:
    mode: RIGHT
    elementPath: /ean
----

===== Sample input (Single textual content)
[source, json]
----
{
  "ean": "  12345  "
}
----

===== Sample output of `trimNormalizer` function
[source, json]
----
{
  "ean": "  12345"
}
----

===== Sample input (Multiple textual content)
[source, json]
----
{
  "ean": ["  12345  ", "56789"]
}
----

===== Sample output of `trimNormalizer` function
[source, json]
----
{
  "ean": ["  12345", "56789"]
}
----

==== Configuration
image:trimNormalizer-BOTH.png[]
----
Function configuration:
    mode: BOTH
    elementPath: /ean
----

===== Sample input (Single textual content)
[source, json]
----
{
  "ean": "  12345  "
}
----

===== Sample output of `trimNormalizer` function
[source, json]
----
{
  "ean": "12345"
}
----

===== Sample input (Multiple textual content)
[source, json]
----
{
  "ean": ["  12345  ", "56789"]
}
----

===== Sample output of `trimNormalizer` function
[source, json]
----
{
  "ean": ["12345", "56789"]
}
----

== padNormalizer
image:padNormalizer.png[]

== Match
image:Match.png[]

image:fromInput.png[]

image:literal.png[]

== Reduce2One
image:reduce2One.png[]

== MergeCreate
image:MergeCreate.png[]

image:mapping.png[]

== ChangeEventEmit
image:ChangeEventEmit.png[]

== Multiple Functions
image:multipleFns.png[]

